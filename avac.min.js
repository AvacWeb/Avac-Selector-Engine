/* 
* Avac CSS Selector Engine. 
* Created by LGforum @ AvacWeb (avacweb.com)
* AvacWeb Copyright 2011-2012
* All Right Reserved.
* No unauthorized distrubution or copying.
*/
(function(){function q(b){return b.match(/(?:#[\w\d_-]+)|(?:\.[\w\d_-]+)|(?:\[\w+(?:[\$\*\^!\|~=]?=["']?.+["']?)?\])|(?:[\>\+~])|\w+|\s|(?::[\w-]+(?:\([^\)]+\))?)/g)||[]}function o(b){var c={id:/^#[^\>\+\.\s\[:]+$/,"class":/^\.[^\>\+\.\s\[:]+$/,tag:/^[^\>\+\.\s\[:="']+$/,rel:/^\>|\+|~$/,attr:/^\[\w+(?:[\$\*\^!\|~]?=["']?.+["']?)?\]$/,changer:/^:(?:eq|gt|lt|first|last|odd|even)(?:\(\d+\))?$/,pseudo:/^:[\w\-]+(?:\(.+\))?$/,space:/^\s+$/},d;for(d in c)if(c[d].test(b))return d;return!1}function h(b,c,d){for(var e=0,f=[],h=b.length;e<h;e++){var k=b[e],j=d(k);c?j&&f.push(k):f=f.concat(j)}return f}[].indexOf||(Array.prototype.indexOf=function(b){for(var c=0,d=this.length;c<d;c++)if(this[c]===b)return c;return-1});var k;try{Array.prototype.slice.call(document.getElementsByTagName("html")),k=function(b){return Array.prototype.slice.call(b)}}catch(x){k=function(b){if(b instanceof Object)return Array.prototype.slice.call(b);l=b.length;ret=[];for(i=0;i<l;i++)ret.push(b[i]);return ret}}var f=function(b,c){if(b&&!/^\s*$/.test(b)&&b.charAt){var b=b.replace(/^\s+|\s+$/,"").replace(/\s?([\+~\>])\s?/g," $1"),d=[document];c&&(c.nodeType&&c.nodeType==1)&&(d=[c]);var e=/.*(?!(?:\(|\[).*#.+(?:\)|\]))(?:[\w\d]+|\s)#([\w\d_-]+).*/g;if(e.test(b)){d=[document.getElementById(b.replace(e,"$1"))];b=b.substr(e.lastIndex)}var m;if(document.querySelectorAll)try{document.querySelectorAll(b);m=window.Element.prototype.querySelectorAll}catch(w){m=false}else m=false;if(m)return h(d,false,function(c){return k(c.querySelectorAll(b))});e=q(b);m=0;for(var s=e.length,j=[],t=f.getters,u=f.filters,v=f.changers,e=h(e,false,function(b){return[{text:b,type:o(b)}]});m<s;m++){if(d.length==0)return[];var g=e[m],p=e[m+1];if(!g.type)throw Error("Invalid Selector: "+g.text);if(g.type!="space"&&p)j.push(g);else{var r=g.type!="space"&&g.type!="changer"?g:j.shift(),d=h(d,false,function(b){return t[r.type](b,r.text)});if(g.type=="changer"){p=g.text.replace(/[^\(]+\((\d+)\)$/,"$1");g=g.text.replace(/^:(\w+).*/,"$1");d=v[g](d,p)}if(j.length){for(var n=0,g=j.length;n<g;n++)d=h(d,true,function(b){return u[j[n].type](b,j[n].text)});n=0}j=[]}}return d}};f.getters={id:function(b,c){return b.getElementById?[b.getElementById(c.substr(1))]:[document.getElementById(c.substr(1))]},"class":function(b,c){return b.getElementsByClassName?k(b.getElementsByClassName(c.substr(1))):h(b.all?b.all:b.getElementsByTagName("*"),true,function(b){return f.filters["class"](b,c)})},tag:function(b,c){return k(b.getElementsByTagName(c))},attr:function(b,c){return h(b.all?b.all:b.getElementsByTagName("*"),true,function(b){return f.filters.attr(b,c)})},rel:function(b,c){if(/\+|~/.test(c))b=b.parentNode;return h(b.childNodes,true,function(b){return f.filters.rel(b,c)})},pseudo:function(b,c){return h(b.all?b.all:b.getElementsByTagName("*"),true,function(b){return f.filters.pseudo(b,c)})}};f.filters={id:function(b,c){return b.id&&b.id===c.substr(1)},"class":function(b,c){return b.className&&RegExp("(^|\\s)"+c.substr(1)+"(\\s|$)").test(b.className)},tag:function(b,c){return b.tagName&&b.tagName.toLowerCase()===c.toLowerCase()},attr:function(b,c){var c=c.replace(/^\[|\]$/g,""),d=c.match(/(?:[^\|\^\*\$!~=]+)|(?:[\|\^\*\$!~=]?=)|(?:['"]?.+['"]?$)/g);d[2]&&(d[2]=d[2].replace(/^['"]|['"]$/g,""));var e=b.getAttribute?b.getAttribute(d[0]):b.attributes.getNamedItem(d[0]);if(!d[1]||!e)return e;switch(d[1]){case "==":case "=":return e===d[2];case "^=":case "|=":return e.indexOf(d[2])===0;case "$=":return RegExp(d[2]+"$").test(e);case "*=":case "~=":return e.indexOf(d[2])!=-1;case "!=":return e!=d[2]}return false},rel:function(b,c){switch(c){case "+":for(var d=b.previousElementSibling||b.previousSibling;d&&d.nodeType!=1;)d=d.previousSibling;return nodes.indexOf(d)!=-1;case "~":for(;b=b.previousSibling;)if(nodes.indexOf(b)!=-1)return true;break;case ">":return nodes.indexOf(b.parentElement||b.parentNode)!=-1}return false},pseudo:function(b,c){var d=c.match(/^:([\w-]+)|\(\s*['"]?(.*)['"]?\s*\)?/g);return f.pseudo_filter[d[0].substr(1)](b,d[1])}};f.pseudo_filter={"first-child":function(b){for(;b=b.previousSibling;)if(b.nodeType==1)return false;return true},"last-child":function(b){for(;b=b.nextSibling;)if(b.nodeType==1)return false;return true},hidden:function(b){var c=b.style;return b.type==="hidden"||c&&c.display==="none"||c&&c.visibility==="hidden"},contains:function(b,c){return(b.textContent||b.innerText||b.innerHTML.replace(/\<\/?[^\>]+>/g,"")).indexOf(c)!=-1},notcontains:function(b,c){return!this.contains(b,c)},"only-child":function(b){return this["first-child"](b)&&this["last-child"](b)},empty:function(b){return!b.hasChildNodes()},not:function(b,c){return f.self(c,b.parentNode).indexOf(b)==-1},has:function(b,c){return f.self(c,b).length>0},nothas:function(b,c){return!this.has(b,c)},selected:function(b){return b.selected},visible:function(b){return!this.hidden(b)},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)},enabled:function(b){return!b.disabled},disabled:function(b){return b.disabled},checkbox:function(b){return b.type==="checkbox"},text:function(b){return b.type==="text"},header:function(b){return/h\d/i.test(b.nodeName)},radio:function(b){return b.type==="radio"},checked:function(b){return b.checked},parent:function(b){return b.hasChildNodes()}};f.changers={eq:function(b,c){return[b[parseInt(c)]]},gt:function(b,c){return b.slice(parseInt(c))},lt:function(b,c){return b.slice(0,parseInt(c))},first:function(b){return[b[0]]},last:function(b){return[b[a.length-1]]},odd:function(b,c,d){for(var c=d?0:1,d=b.length,e=[];c<d;c++){e.push(b[c]);c++}return e},even:function(b,c){return this.odd(b,c,true)}};f.self=f;f.filter=function(b,c){var d=o(c);return h(b,true,function(b){return f.filters[d](b,c)})};f.match=function(b,c){for(var d=q(c),e=0,h=d.length;e<h;e++){var k=o(d[e]);if(!f.filters[k](b,d[e]))return false}return true};window.$avac=f})();